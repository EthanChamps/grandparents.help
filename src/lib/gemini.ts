import { GoogleGenAI } from '@google/genai'

let geminiClient: GoogleGenAI | null = null

export function getGemini(): GoogleGenAI {
  if (!geminiClient) {
    const apiKey = process.env.GEMINI_API_KEY
    if (!apiKey) {
      throw new Error('GEMINI_API_KEY environment variable is not set')
    }
    geminiClient = new GoogleGenAI({ apiKey })
  }
  return geminiClient
}

// Using Gemini 2.5 Flash - latest stable model (2.0 deprecated March 2026)
export const GEMINI_MODEL = 'gemini-2.5-flash'
